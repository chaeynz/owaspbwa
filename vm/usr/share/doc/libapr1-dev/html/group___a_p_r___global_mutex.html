<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Apache Portable Runtime: Global Locking Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Global Locking Routines<br/>
<small>
[<a class="el" href="group___a_p_r.html">Apache Portability Runtime library</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga7a5ade1ba8ea6c7a7a61e3e719683cb0">apr_global_mutex_create</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> **mutex, const char *fname, <a class="el" href="group__apr__proc__mutex.html#ga75dd95a48a1e855a87b509b522746ed4">apr_lockmech_e</a> mech, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga51eb034bca0352075c92c08a21d4d7a0">apr_global_mutex_child_init</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> **mutex, const char *fname, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga1338485664e6c2737340114cace57121">apr_global_mutex_lock</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *mutex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga2a6543fba6473b47e33a7b7fc2ba6935">apr_global_mutex_trylock</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *mutex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga16e732ae76dfe104b157e0fc543d3aa3">apr_global_mutex_unlock</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *mutex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga1f2cb4a1ec57089db49701e747892607">apr_global_mutex_destroy</a> (<a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *mutex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___a_p_r___global_mutex.html#ga01d5c1bbb32b976083b9c8234b04cd46">apr_global_mutex_pool_get</a> (const <a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *theglobal_mutex)</td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga3fc7dc5b076533ee566aa4888ac35ee7"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_t" ref="ga3fc7dc5b076533ee566aa4888ac35ee7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> <a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opaque global mutex structure. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga51eb034bca0352075c92c08a21d4d7a0"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_child_init" ref="ga51eb034bca0352075c92c08a21d4d7a0" args="(apr_global_mutex_t **mutex, const char *fname, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_child_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> **&nbsp;</td>
          <td class="paramname"> <em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Re-open a mutex in a child process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>The newly re-opened mutex structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fname</em>&nbsp;</td><td>A file name to use if the mutex mechanism requires one. This argument should always be provided. The mutex code itself will determine if it should be used. This filename should be the same one that was passed to <a class="el" href="group___a_p_r___global_mutex.html#ga7a5ade1ba8ea6c7a7a61e3e719683cb0">apr_global_mutex_create()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>The pool to operate on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>This function must be called to maintain portability, even if the underlying lock mechanism does not require it. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7a5ade1ba8ea6c7a7a61e3e719683cb0"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_create" ref="ga7a5ade1ba8ea6c7a7a61e3e719683cb0" args="(apr_global_mutex_t **mutex, const char *fname, apr_lockmech_e mech, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> **&nbsp;</td>
          <td class="paramname"> <em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__proc__mutex.html#ga75dd95a48a1e855a87b509b522746ed4">apr_lockmech_e</a>&nbsp;</td>
          <td class="paramname"> <em>mech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and initialize a mutex that can be used to synchronize both processes and threads. Note: There is considerable overhead in using this API if only cross-process or cross-thread mutual exclusion is required. See <a class="el" href="apr__proc__mutex_8h.html" title="APR Process Locking Routines.">apr_proc_mutex.h</a> and <a class="el" href="apr__thread__mutex_8h.html" title="APR Thread Mutex Routines.">apr_thread_mutex.h</a> for more specialized lock routines. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>the memory address where the newly created mutex will be stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fname</em>&nbsp;</td><td>A file name to use if the lock mechanism requires one. This argument should always be provided. The lock code itself will determine if it should be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mech</em>&nbsp;</td><td>The mechanism to use for the interprocess lock, if any; one of </p>
<pre>
            APR_LOCK_FCNTL
            APR_LOCK_FLOCK
            APR_LOCK_SYSVSEM
            APR_LOCK_POSIXSEM
            APR_LOCK_PROC_PTHREAD
            APR_LOCK_DEFAULT     pick the default mechanism for the platform
 </pre> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>the pool from which to allocate the mutex. </td></tr>
  </table>
  </dd>
</dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>Check APR_HAS_foo_SERIALIZE defines to see if the platform supports APR_LOCK_foo. Only APR_LOCK_DEFAULT is portable. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1f2cb4a1ec57089db49701e747892607"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_destroy" ref="ga1f2cb4a1ec57089db49701e747892607" args="(apr_global_mutex_t *mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mutex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy the mutex and free the memory associated with the lock. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>the mutex to destroy. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1338485664e6c2737340114cace57121"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_lock" ref="ga1338485664e6c2737340114cace57121" args="(apr_global_mutex_t *mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mutex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Acquire the lock for the given mutex. If the mutex is already locked, the current thread will be put to sleep until the lock becomes available. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>the mutex on which to acquire the lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga01d5c1bbb32b976083b9c8234b04cd46"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_pool_get" ref="ga01d5c1bbb32b976083b9c8234b04cd46" args="(const apr_global_mutex_t *theglobal_mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a>* apr_global_mutex_pool_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *&nbsp;</td>
          <td class="paramname"> <em>theglobal_mutex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the pool used by this global_mutex. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>apr_pool_t the pool </dd></dl>

</div>
</div>
<a class="anchor" id="ga2a6543fba6473b47e33a7b7fc2ba6935"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_trylock" ref="ga2a6543fba6473b47e33a7b7fc2ba6935" args="(apr_global_mutex_t *mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_trylock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mutex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attempt to acquire the lock for the given mutex. If the mutex has already been acquired, the call returns immediately with APR_EBUSY. Note: it is important that the <a class="el" href="group___a_p_r___s_t_a_t_u_s___i_s.html#gabb92ad7b6ef304132de70e9e5cbaa896">APR_STATUS_IS_EBUSY(s)</a> macro be used to determine if the return value was APR_EBUSY, for portability reasons. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>the mutex on which to attempt the lock acquiring. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga16e732ae76dfe104b157e0fc543d3aa3"></a><!-- doxytag: member="apr_global_mutex.h::apr_global_mutex_unlock" ref="ga16e732ae76dfe104b157e0fc543d3aa3" args="(apr_global_mutex_t *mutex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_global_mutex_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___a_p_r___global_mutex.html#ga3fc7dc5b076533ee566aa4888ac35ee7">apr_global_mutex_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mutex</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Release the lock for the given mutex. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mutex</em>&nbsp;</td><td>the mutex from which to release the lock. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
