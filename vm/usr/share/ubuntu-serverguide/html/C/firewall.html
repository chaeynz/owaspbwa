<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title xmlns="">Firewall</title>
    <link rel="stylesheet" href="../../libs/ubuntu-book.css" type="text/css" />
    <link rel="home" href="index.html" title="Ubuntu Server Guide" />
    <link rel="up" href="security.html" title="Chapter 8. Security" />
    <link rel="prev" href="console-security.html" title="Console Security" />
    <link rel="next" href="apparmor.html" title="AppArmor" />
    <link rel="copyright" href="legal.html" title="Credits and License" />
  </head>
  <body>
    <div id="round">
      <img id="topcap" alt="" src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-top.png" />
      <div id="layout" class="container clear-block">
        <script xmlns="" src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script>
        <script xmlns="" type="text/javascript">
_uacct = "UA-1018242-8";
urchinTracker();
</script>
        <div id="header">
          <div id="logo-floater">
            <h1>
              <a href="https://help.ubuntu.com" title="Ubuntu Documentation">
                <img alt="Ubuntu" id="logo" src="https://help.ubuntu.com/htdocs/ubuntunew/img/logo.png" />
              </a>
            </h1>
          </div>
          <noscript>
            <form action="http://www.google.com/cse" id="cse-search-box">
              <div>
                <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="text" name="q" size="27" />
                <input type="submit" name="sa" value="Search" />
              </div>
            </form>
          </noscript>
          <script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="27" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script>
          <div id="sitename">
            <a href="https://help.ubuntu.com/">
              <img alt="Official Documentation" src="https://help.ubuntu.com/htdocs/ubuntunew/img/help-about.png" />
              <span>Official Documentation</span>
            </a>
          </div>
        </div>
        <div id="page">
          <div id="content">
            <div class="breadcrumbs"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a> &gt; <a href="https://help.ubuntu.com/10.04">Ubuntu 10.04</a> &gt; <span class="breadcrumb-link"><a href="index.html">Ubuntu Server Guide</a></span> &gt; <span class="breadcrumb-link"><a href="security.html">Security</a></span> &gt; <span class="breadcrumb-node">Firewall</span></div>
            <div xmlns="http://www.w3.org/1999/xhtml" class="sect1" title="Firewall">
              <div class="titlepage">
                <div>
                  <div>
                    <h2 class="title" style="clear: both"><a id="firewall"></a>Firewall</h2>
                  </div>
                </div>
              </div>
              <div class="sect2" title="Introduction">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="firewall-introduction"></a>Introduction</h3>
                    </div>
                  </div>
                </div>
                <p>
             The Linux kernel includes the <span class="emphasis"><em>Netfilter</em></span> subsystem,
			 which is used to manipulate or decide the fate of network traffic headed into or through
			 your server.  All modern Linux firewall solutions use this system for packet filtering.
          </p>
                <p>
              The kernel's packet filtering system would be of little use to administrators without
			  a userspace interface to manage it.  This is the purpose of iptables.  When a packet
			  reaches your server, it will be handed off to the Netfilter subsystem for acceptance,
			  manipulation, or rejection based on the rules supplied to it from userspace via
			  iptables.  Thus, iptables is all you need to manage your firewall if you're familiar
			  with it, but many frontends are available to simplify the task.
            </p>
              </div>
              <div class="sect2" title="ufw - Uncomplicated Firewall">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="firewall-ufw"></a>ufw - Uncomplicated Firewall</h3>
                    </div>
                  </div>
                </div>
                <p>
	    The default firewall configuration tool for Ubuntu is <span class="application"><strong>ufw</strong></span>.  Developed to ease iptables firewall configuration,
	    <span class="application"><strong>ufw</strong></span> provides a user friendly way to create an IPv4 or IPv6 host-based firewall.
	    </p>
                <p>
            <span class="application"><strong>ufw</strong></span> by default is initially disabled.  From the <span class="application"><strong>ufw</strong></span> man page: 
	    </p>
                <p>
<span class="quote">“<span class="quote">
       ufw is not intended to provide complete firewall functionality via its command interface, but instead provides an easy way to add or remove simple rules.  It  is  currently mainly used for host-based firewalls.
</span>”</span>
	    </p>
                <p>
	    The following are some examples of how to use <span class="application"><strong>ufw</strong></span>:
	    </p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
                First, <span class="application"><strong>ufw</strong></span> needs to be enabled.  From a terminal prompt enter:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw enable</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                To open a port (ssh in this example):
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw allow 22</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                Rules can also be added using a <span class="emphasis"><em>numbered</em></span> format:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw insert 1 allow 80</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                Similarly, to close an opened port:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw deny 22</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                To remove a rule, use delete followed by the rule:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw delete deny 22</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
		It is also possible to allow access from specific hosts or networks to a port.  The following example allows ssh access
		from host 192.168.0.2 to any ip address on this host:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw allow proto tcp from 192.168.0.2 to any port 22</strong></span>
</pre>
                      <p>
		Replace 192.168.0.2 with 192.168.0.0/24 to allow ssh access from the entire subnet.
		</p>
                    </li>
                    <li class="listitem">
                      <p>
                Adding the <span class="emphasis"><em>--dry-run</em></span> option to a <span class="emphasis"><em>ufw</em></span> command will output the resulting
                rules, but not apply them.  For example, the following is what would be applied if opening the HTTP port:
                </p>
                      <pre class="screen">
<span class="command"><strong> sudo ufw --dry-run allow http</strong></span>
</pre>
                      <pre class="screen">
<code class="computeroutput">*filter
:ufw-user-input - [0:0]
:ufw-user-output - [0:0]
:ufw-user-forward - [0:0]
:ufw-user-limit - [0:0]
:ufw-user-limit-accept - [0:0]
### RULES ###

### tuple ### allow tcp 80 0.0.0.0/0 any 0.0.0.0/0
-A ufw-user-input -p tcp --dport 80 -j ACCEPT

### END RULES ###
-A ufw-user-input -j RETURN
-A ufw-user-output -j RETURN
-A ufw-user-forward -j RETURN
-A ufw-user-limit -m limit --limit 3/minute -j LOG --log-prefix "[UFW LIMIT]: "
-A ufw-user-limit -j REJECT
-A ufw-user-limit-accept -j ACCEPT
COMMIT
Rules updated</code>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                <span class="application"><strong>ufw</strong></span> can be disabled by:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw disable</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                To see the firewall status, enter:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw status</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                And for more verbose status information use:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw status verbose</strong></span>
</pre>
                    </li>
                    <li class="listitem">
                      <p>
                To view the <span class="emphasis"><em>numbered</em></span> format:
	        </p>
                      <pre class="screen">
<span class="command"><strong>sudo ufw status numbered</strong></span>
</pre>
                    </li>
                  </ul>
                </div>
                <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <table border="0" summary="Note">
                    <tr>
                      <td rowspan="2" align="center" valign="top" width="25">
                        <img alt="[Note]" src="../../libs/admon/note.png" />
                      </td>
                      <th align="left"></th>
                    </tr>
                    <tr>
                      <td align="left" valign="top">
                        <p>
	      If the port you want to open or close is defined in <code class="filename">/etc/services</code>, you can use the port name instead of the number.
	      In the above examples, replace <span class="emphasis"><em>22</em></span> with <span class="emphasis"><em>ssh</em></span>. 
              </p>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>
	    This is a quick introduction to using <span class="application"><strong>ufw</strong></span>. Please refer to the <span class="application"><strong>ufw</strong></span> man page for 
            more information.
	    </p>
                <div class="sect3" title="ufw Application Integration">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h4 class="title"><a id="ufw-application-integration"></a>ufw Application Integration</h4>
                      </div>
                    </div>
                  </div>
                  <p>
              Applications that open ports can include an <span class="application"><strong>ufw</strong></span> profile, which details the ports needed for the 
              application to function properly.  The profiles are kept in <code class="filename">/etc/ufw/applications.d</code>,
              and can be edited if the default ports have been changed.
              </p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist" type="disc">
                      <li class="listitem">
                        <p>
                  To view which applications have installed a profile, enter the following in a terminal:
                  </p>
                        <pre class="screen">
<span class="command"><strong>sudo ufw app list</strong></span>
</pre>
                      </li>
                      <li class="listitem">
                        <p>
                  Similar to allowing traffic to a port, using an application profile is accomplished by entering:
                  </p>
                        <pre class="screen">
<span class="command"><strong>sudo ufw allow Samba</strong></span>
</pre>
                      </li>
                      <li class="listitem">
                        <p>
                  An extended syntax is available as well:
                  </p>
                        <pre class="screen">
<span class="command"><strong>ufw allow from 192.168.0.0/24 to any app Samba</strong></span>
</pre>
                        <p>
                  Replace <span class="emphasis"><em>Samba</em></span> and <span class="emphasis"><em>192.168.0.0/24</em></span> with the application profile you are 
                  using and the IP range for your network. 
                  </p>
                        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
                          <table border="0" summary="Note">
                            <tr>
                              <td rowspan="2" align="center" valign="top" width="25">
                                <img alt="[Note]" src="../../libs/admon/note.png" />
                              </td>
                              <th align="left"></th>
                            </tr>
                            <tr>
                              <td align="left" valign="top">
                                <p>
                    There is no need to specify the <span class="emphasis"><em>protocol</em></span> for the application, because that information is detailed in
                    the profile.  Also, note that the <span class="emphasis"><em>app</em></span> name replaces the <span class="emphasis"><em>port</em></span> number.
                    </p>
                              </td>
                            </tr>
                          </table>
                        </div>
                      </li>
                      <li class="listitem">
                        <p>
                  To view details about which ports, protocols, etc are defined for an application, enter:
                  </p>
                        <pre class="screen">
<span class="command"><strong>sudo ufw app info Samba</strong></span>
</pre>
                      </li>
                    </ul>
                  </div>
                  <p>
              Not all applications that require opening a network port come with <span class="application"><strong>ufw</strong></span> profiles, but if 
              you have profiled an application and want the file to be included with the package, please file a bug against the 
              package in <a class="ulink" href="https://launchpad.net/" target="_top">Launchpad</a>.
              </p>
                </div>
              </div>
              <div class="sect2" title="IP Masquerading">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="ip-masquerading"></a>IP Masquerading</h3>
                    </div>
                  </div>
                </div>
                <p>
              The purpose of IP Masquerading is to allow machines with private, non-routable IP
			  addresses on your network to access the Internet through the machine doing the
			  masquerading.  Traffic from your private network destined for the Internet must be
			  manipulated for replies to be routable back to the machine that made the request.
			  To do this, the kernel must modify the <span class="emphasis"><em>source</em></span>
			  IP address of each packet so that replies will be routed back to it, rather than
			  to the private IP address that made the request, which is impossible over the 
			  Internet.  Linux uses <span class="emphasis"><em>Connection Tracking</em></span>
			  (conntrack) to keep track of which connections belong to which machines and reroute
			  each return packet accordingly.  Traffic leaving your private network is thus
			  "masqueraded" as having originated from your Ubuntu gateway machine.
			  This process is referred to in Microsoft documentation as Internet
			  Connection Sharing.
            </p>
                <div class="sect3" title="ufw Masquerading">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h4 class="title"><a id="ip-masquerade-ufw"></a>ufw Masquerading</h4>
                      </div>
                    </div>
                  </div>
                  <p>
	      IP Masquerading can be achieved using custom <span class="application"><strong>ufw</strong></span> rules.  This is possible because the current
	      back-end for <span class="application"><strong>ufw</strong></span> is <span class="application"><strong>iptables-restore</strong></span> with the rules files located in 
	      <code class="filename">/etc/ufw/*.rules</code>.  These files are a great place to add legacy iptables rules used 
              without <span class="application"><strong>ufw</strong></span>, and rules that are more network gateway or bridge related.
	      </p>
                  <p>
	      The rules are split into two different files, rules that should be executed before
	      <span class="application"><strong>ufw</strong></span> command line rules, and rules that are executed after <span class="application"><strong>ufw</strong></span> command line rules.
	      </p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist" type="disc">
                      <li class="listitem">
                        <p>
		  First, packet forwarding needs to be enabled in <span class="application"><strong>ufw</strong></span>.  Two configuration files will need to be adjusted, in
		  <code class="filename">/etc/default/ufw</code> change the <span class="emphasis"><em>DEFAULT_FORWARD_POLICY</em></span> to <span class="quote">“<span class="quote">ACCEPT</span>”</span>:
		  </p>
                        <pre class="programlisting">
DEFAULT_FORWARD_POLICY="ACCEPT"
</pre>
                        <p>
		  Then edit <code class="filename">/etc/ufw/sysctl.conf</code> and uncomment:
		  </p>
                        <pre class="programlisting">
net/ipv4/ip_forward=1
</pre>
                        <p>
		  Similarly, for IPv6 forwarding uncomment:
		  </p>
                        <pre class="programlisting">
net/ipv6/conf/default/forwarding=1
</pre>
                      </li>
                      <li class="listitem">
                        <p>
		  Now we will add rules to the <code class="filename">/etc/ufw/before.rules</code> file.  The default rules only configure the <span class="emphasis"><em>filter</em></span>
	          table, and to enable masquerading the <span class="emphasis"><em>nat</em></span> table will need to be configured.  Add the following to the top of the file
		  just after the header comments:	          
		  </p>
                        <pre class="programlisting">
# nat Table rules
*nat
:POSTROUTING ACCEPT [0:0]

# Forward traffic from eth1 through eth0.
-A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE

# don't delete the 'COMMIT' line or these nat table rules won't be processed
COMMIT
</pre>
                        <p>
	          The comments are not strictly necessary, but it is considered good practice to document your configuration. Also, when modifying 
		  any of the <span class="emphasis"><em>rules</em></span> files in <code class="filename">/etc/ufw</code>, make sure these lines are the last
		  line for each table modified:
	          </p>
                        <pre class="programlisting">
# don't delete the 'COMMIT' line or these rules won't be processed
COMMIT
</pre>
                        <p>
                  For each <span class="emphasis"><em>Table</em></span> a corresponding <span class="emphasis"><em>COMMIT</em></span> statement is required.  In these examples 
                  only the <span class="emphasis"><em>nat</em></span> and <span class="emphasis"><em>filter</em></span> tables are shown, but you can also add rules for the 
                  <span class="emphasis"><em>raw</em></span> and <span class="emphasis"><em>mangle</em></span> tables.
                  </p>
                        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
                          <table border="0" summary="Note">
                            <tr>
                              <td rowspan="2" align="center" valign="top" width="25">
                                <img alt="[Note]" src="../../libs/admon/note.png" />
                              </td>
                              <th align="left"></th>
                            </tr>
                            <tr>
                              <td align="left" valign="top">
                                <p>
                   In the above example replace <span class="emphasis"><em>eth0</em></span>, <span class="emphasis"><em>eth1</em></span>, and <span class="emphasis"><em>192.168.0.0/24</em></span> 
                   with the appropriate interfaces and IP range for your network.
                   </p>
                              </td>
                            </tr>
                          </table>
                        </div>
                      </li>
                      <li class="listitem">
                        <p>
		  Finally, disable and re-enable <span class="application"><strong>ufw</strong></span> to apply the changes:
		  </p>
                        <pre class="programlisting">
<span class="command"><strong>sudo ufw disable &amp;&amp; sudo ufw enable</strong></span>
</pre>
                      </li>
                    </ul>
                  </div>
                  <p>
	      IP Masquerading should now be enabled. You can also add any additional FORWARD rules
              to the <code class="filename">/etc/ufw/before.rules</code>. It is recommended that these additional
              rules be added to the <span class="emphasis"><em>ufw-before-forward</em></span> chain.
	      </p>
                </div>
                <div class="sect3" title="iptables Masquerading">
                  <div class="titlepage">
                    <div>
                      <div>
                        <h4 class="title"><a id="ip-masquerading-iptables"></a>iptables Masquerading</h4>
                      </div>
                    </div>
                  </div>
                  <p>
	    <span class="application"><strong>iptables</strong></span> can also be used to enable masquerading.  
	    </p>
                  <div class="itemizedlist">
                    <ul class="itemizedlist" type="disc">
                      <li class="listitem">
                        <p>
 	        Similar to <span class="application"><strong>ufw</strong></span>, the first step is to enable IPv4 packet forwarding by editing 
		<code class="filename">/etc/sysctl.conf</code> and uncomment the following line
	        </p>
                        <pre class="programlisting">
net.ipv4.ip_forward=1
</pre>
                        <p>
	        If you wish to enable IPv6 forwarding also uncomment: 
	        </p>
                        <pre class="programlisting">
net.ipv6.conf.default.forwarding=1
</pre>
                      </li>
                      <li class="listitem">
                        <p>
		  Next, execute the <span class="application"><strong>sysctl</strong></span> command to enable the new settings in the configuration file:
		  </p>
                        <pre class="screen">
<span class="command"><strong>sudo sysctl -p</strong></span>
</pre>
                      </li>
                      <li class="listitem">
                        <p>
                IP Masquerading can now be accomplished with a single iptables rule, which may differ slightly based on your network configuration:
	        </p>
                        <pre class="screen">
sudo iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</pre>
                        <p>
	        The above command assumes that your private address space is 192.168.0.0/16 and
	        that your Internet-facing device is ppp0.  The syntax is broken down as follows:
		</p>
                        <div class="itemizedlist">
                          <ul class="itemizedlist" type="circle">
                            <li class="listitem">
                              <p> -t nat -- the rule is to go into the nat table</p>
                            </li>
                            <li class="listitem">
                              <p> -A POSTROUTING -- the rule is to be appended (-A) to the POSTROUTING chain</p>
                            </li>
                            <li class="listitem">
                              <p> -s 192.168.0.0/16 -- the rule applies to traffic originating from the specified address space</p>
                            </li>
                            <li class="listitem">
                              <p> -o ppp0 -- the rule applies to traffic scheduled to be routed through the specified network device</p>
                            </li>
                            <li class="listitem">
                              <p>
                    -j MASQUERADE -- traffic matching this rule is to "jump"
		    (-j) to the MASQUERADE target to be manipulated as described above
                    </p>
                            </li>
                          </ul>
                        </div>
                      </li>
                      <li class="listitem">
                        <p>
	        Also, each chain in the filter table (the default table, and where most or all packet
		filtering occurs) has a default <span class="emphasis"><em>policy</em></span> of
		ACCEPT, but if you are creating a firewall in addition to a gateway device, you
		may have set the policies to DROP or REJECT, in which case your masqueraded
		traffic needs to be allowed through the FORWARD chain for the above rule to work:
		</p>
                        <pre class="screen">
sudo iptables -A FORWARD -s 192.168.0.0/16 -o ppp0 -j ACCEPT
sudo iptables -A FORWARD -d 192.168.0.0/16 -m state --state ESTABLISHED,RELATED -i ppp0 -j ACCEPT
</pre>
                        <p>
		The above commands will allow all connections from your local network to the
		Internet and all traffic related to those connections to return to the machine
		that initiated them.
		</p>
                      </li>
                      <li class="listitem">
                        <p>
	        If you want masquerading to be enabled on reboot, which you probably do, edit <code class="filename">/etc/rc.local</code> and add any 
		commands used above.  For example add the first command with no filtering:
		</p>
                        <pre class="screen">
iptables -t nat -A POSTROUTING -s 192.168.0.0/16 -o ppp0 -j MASQUERADE
</pre>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="sect2" title="Logs">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="firewall-logs"></a>Logs</h3>
                    </div>
                  </div>
                </div>
                <p>
            Firewall logs are essential for recognizing attacks, troubleshooting your
            firewall rules, and noticing unusual activity on your network.  You must include
	    logging rules in your firewall for them to be generated, though, and logging
	    rules must come before any applicable terminating rule (a rule with a target
	    that decides the fate of the packet, such as ACCEPT, DROP, or REJECT).  
	     </p>
                <p>
	     If you are using <span class="application"><strong>ufw</strong></span>, you can turn on logging by entering the following in a terminal:
	     </p>
                <pre class="screen">
<span class="command"><strong>sudo ufw logging on</strong></span>
</pre>
                <p>
	     To turn logging off in <span class="application"><strong>ufw</strong></span>, simply replace <span class="italic">on</span> with <span class="italic">off</span> in the above command.
	     </p>
                <p>
	     If using <span class="application"><strong>iptables</strong></span> instead of <span class="application"><strong>ufw</strong></span>, enter:
	     </p>
                <pre class="screen">
sudo iptables -A INPUT -m state --state NEW -p tcp --dport 80 -j LOG --log-prefix "NEW_HTTP_CONN: "
</pre>
                <p>
	     A request on port 80 from the local machine, then, would generate a log in dmesg
	     that looks like this:
	     </p>
                <p>
			  </p>
                <pre class="programlisting">[4304885.870000] NEW_HTTP_CONN: IN=lo OUT= MAC=00:00:00:00:00:00:00:00:00:00:00:00:08:00 SRC=127.0.0.1 DST=127.0.0.1 LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=58288 DF PROTO=TCP SPT=53981 DPT=80 WINDOW=32767 RES=0x00 SYN URGP=0</pre>
                <p>
			</p>
                <p>
              The above log will also appear in <code class="filename">/var/log/messages</code>,
			  <code class="filename">/var/log/syslog</code>, and <code class="filename">/var/log/kern.log</code>.
			  This behavior can be modified by editing <code class="filename">/etc/syslog.conf</code>
			  appropriately or by installing and configuring <span class="application"><strong>ulogd</strong></span>
			  and using the ULOG target instead of LOG.  The <span class="application"><strong>ulogd</strong></span>
			  daemon is a userspace server that listens for logging instructions from the kernel
			  specifically for firewalls, and can log to any file you like, or even to a
			  <span class="application"><strong>PostgreSQL</strong></span> or <span class="application"><strong>MySQL</strong></span>
			  database.  Making sense of your firewall logs can be simplified by using a log
			  analyzing tool such as <span class="application"><strong>fwanalog</strong></span>, <span class="application"><strong>
			  fwlogwatch</strong></span>, or <span class="application"><strong>lire</strong></span>.
            </p>
              </div>
              <div class="sect2" title="Other Tools">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="other-firewall-tools"></a>Other Tools</h3>
                    </div>
                  </div>
                </div>
                <p>
            There are many tools available to help you construct a complete firewall without
	    intimate knowledge of iptables.  For the GUI-inclined:
	    </p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
	        <a class="ulink" href="http://www.fs-security.com/" target="_top">Firestarter</a> is quite popular and easy to use.
		</p>
                    </li>
                    <li class="listitem">
                      <p>
		<a class="ulink" href="http://www.fwbuilder.org/" target="_top">fwbuilder</a> is very powerful and will look familiar 
	        to an administrator who has used a commercial firewall utility such as <span class="application"><strong>Checkpoint FireWall-1</strong></span>.  
		</p>
                    </li>
                  </ul>
                </div>
                <p>
	    If you prefer a command-line tool with plain-text configuration files: 
	    </p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
		<a class="ulink" href="http://www.shorewall.net/" target="_top">Shorewall</a> is a very powerful solution to help you 
		configure an advanced firewall for any network.  
		</p>
                    </li>
                    <li class="listitem">
                      <p>
		<a class="ulink" href="http://www.linuxkungfu.org/" target="_top">ipkungfu</a> should give you a working firewall "out of the box" 
 		with zero configuration, and will allow you to easily set up a more advanced firewall by editing simple, well-documented 
		configuration files.  
		</p>
                    </li>
                    <li class="listitem">
                      <p>
		<a class="ulink" href="http://fireflier.sourceforge.net/" target="_top">fireflier</a> is designed to be a desktop firewall 
		application.  It is made up of a server (fireflier-server) and your choice of GUI clients (GTK or QT), and 
	        behaves like many popular interactive firewall applications for Windows.
		</p>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="sect2" title="References">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="firewall-references"></a>References</h3>
                    </div>
                  </div>
                </div>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
	      The <a class="ulink" href="https://wiki.ubuntu.com/UbuntuFirewall" target="_top">Ubuntu Firewall</a> wiki page contains information on the development
	      of <span class="application"><strong>ufw</strong></span>.
	      </p>
                    </li>
                    <li class="listitem">
                      <p>
          Also, the <span class="application"><strong>ufw</strong></span> manual page contains some very useful information: <span class="command"><strong>man ufw</strong></span>.
	      </p>
                    </li>
                    <li class="listitem">
                      <p>
	      See the <a class="ulink" href="http://www.netfilter.org/documentation/HOWTO/packet-filtering-HOWTO.html" target="_top">packet-filtering-HOWTO</a>
	      for more information on using <span class="application"><strong>iptables</strong></span>.
	      </p>
                    </li>
                    <li class="listitem">
                      <p>
	      The <a class="ulink" href="http://www.netfilter.org/documentation/HOWTO/NAT-HOWTO.html" target="_top">nat-HOWTO</a> contains further details on
	      masquerading.
	      </p>
                    </li>
                    <li class="listitem">
                      <p>
	      The <a class="ulink" href="https://help.ubuntu.com/community/IptablesHowTo" target="_top">IPTables HowTo</a> in the Ubuntu wiki is a great resource.
	      </p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div xmlns="http://www.w3.org/1999/xhtml" class="navfooter">
            <hr />
            <table width="100%" summary="Navigation footer">
              <tr>
                <td width="40%" align="left"><a accesskey="p" href="console-security.html"><img src="../../libs/navig/prev.png" alt="Prev" /></a> </td>
                <td width="20%" align="center">
                  <a accesskey="u" href="security.html">
                    <img src="../../libs/navig/up.png" alt="Up" />
                  </a>
                </td>
                <td width="40%" align="right"> <a accesskey="n" href="apparmor.html"><img src="../../libs/navig/next.png" alt="Next" /></a></td>
              </tr>
              <tr>
                <td width="40%" align="left" valign="top">Console Security </td>
                <td width="20%" align="center">
                  <a accesskey="h" href="index.html">
                    <img src="../../libs/navig/home.png" alt="Home" />
                  </a>
                </td>
                <td width="40%" align="right" valign="top"> AppArmor</td>
              </tr>
            </table>
          </div>
          <hr />
          <div id="footer">
            <div id="ubuntulinks">
              <p>The material in this document is available under a free license, see <a href="/legal.html">Legal</a> for details<br />
	For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>. To report a problem, visit the <a href="https://bugs.launchpad.net/ubuntu/+source/ubuntu-docs">bug page for Ubuntu Documentation</a></p>
            </div>
          </div>
          <div id="bottomcap">
            <img src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-bottom.png" alt="" />
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
