<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title xmlns="">Dynamic Host Configuration Protocol (DHCP)</title>
    <link rel="stylesheet" href="../../libs/ubuntu-book.css" type="text/css" />
    <link rel="home" href="index.html" title="Ubuntu Server Guide" />
    <link rel="up" href="networking.html" title="Chapter 4. Networking" />
    <link rel="prev" href="tcpip.html" title="TCP/IP" />
    <link rel="next" href="NTP.html" title="Time Synchronisation with NTP" />
    <link rel="copyright" href="legal.html" title="Credits and License" />
  </head>
  <body>
    <div id="round">
      <img id="topcap" alt="" src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-top.png" />
      <div id="layout" class="container clear-block">
        <script xmlns="" src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script>
        <script xmlns="" type="text/javascript">
_uacct = "UA-1018242-8";
urchinTracker();
</script>
        <div id="header">
          <div id="logo-floater">
            <h1>
              <a href="https://help.ubuntu.com" title="Ubuntu Documentation">
                <img alt="Ubuntu" id="logo" src="https://help.ubuntu.com/htdocs/ubuntunew/img/logo.png" />
              </a>
            </h1>
          </div>
          <noscript>
            <form action="http://www.google.com/cse" id="cse-search-box">
              <div>
                <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="text" name="q" size="27" />
                <input type="submit" name="sa" value="Search" />
              </div>
            </form>
          </noscript>
          <script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="27" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script>
          <div id="sitename">
            <a href="https://help.ubuntu.com/">
              <img alt="Official Documentation" src="https://help.ubuntu.com/htdocs/ubuntunew/img/help-about.png" />
              <span>Official Documentation</span>
            </a>
          </div>
        </div>
        <div id="page">
          <div id="content">
            <div class="breadcrumbs"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a> &gt; <a href="https://help.ubuntu.com/10.04">Ubuntu 10.04</a> &gt; <span class="breadcrumb-link"><a href="index.html">Ubuntu Server Guide</a></span> &gt; <span class="breadcrumb-link"><a href="networking.html">Networking</a></span> &gt; <span class="breadcrumb-node">Dynamic Host Configuration Protocol (DHCP)</span></div>
            <div xmlns="http://www.w3.org/1999/xhtml" class="sect1" title="Dynamic Host Configuration Protocol (DHCP)">
              <div class="titlepage">
                <div>
                  <div>
                    <h2 class="title" style="clear: both"><a id="dhcp"></a>Dynamic Host Configuration Protocol (DHCP)</h2>
                  </div>
                </div>
              </div>
              <p>
	    The Dynamic Host Configuration Protocol (DHCP) is a network service that enables 
	    host computers to be automatically assigned settings from a server as opposed to
            manually configuring each network host. Computers configured to be DHCP clients have
            no control over the settings they receive from the DHCP server, and the 
	    configuration is transparent to the computer's user.
	    </p>
              <p>
	    The most common settings provided by a DHCP server to DHCP clients include:
	    </p>
              <div class="itemizedlist">
                <ul class="itemizedlist" type="disc" compact="compact">
                  <li class="listitem">
                    <p>IP-Address and Netmask</p>
                  </li>
                  <li class="listitem">
                    <p>DNS</p>
                  </li>
                  <li class="listitem">
                    <p>WINS</p>
                  </li>
                </ul>
              </div>
              <p>
	    However, a DHCP server can also supply configuration properties such as:
	    </p>
              <div class="itemizedlist">
                <ul class="itemizedlist" type="disc" compact="compact">
                  <li class="listitem">
                    <p>Host Name</p>
                  </li>
                  <li class="listitem">
                    <p>Domain Name</p>
                  </li>
                  <li class="listitem">
                    <p>Default Gateway</p>
                  </li>
                  <li class="listitem">
                    <p>Time Server</p>
                  </li>
                  <li class="listitem">
                    <p>Print Server</p>
                  </li>
                </ul>
              </div>
              <p>
	    The advantage of using DHCP is that changes to the network, for example a change
            in the address of the DNS server, need only be changed at the DHCP server, and all
            network hosts will be reconfigured the next time their DHCP clients poll the
            DHCP server. As an added advantage, it is also easier to integrate new computers 
	    into the network, as there is no need to check for the availability of an IP 
	    address.  Conflicts in IP address allocation are also reduced.
	    </p>
              <p>
	    A DHCP server can provide configuration settings using two methods:
	    </p>
              <div class="variablelist">
                <dl>
                  <dt>
                    <span class="term">MAC Address</span>
                  </dt>
                  <dd>
                    <p>
			This method entails using DHCP to identify the unique hardware address
                        of each network card connected to the network and then continually
                        supplying a constant configuration each time the DHCP client makes a
                        request to the DHCP server using that network device.
			</p>
                  </dd>
                  <dt>
                    <span class="term">Address Pool</span>
                  </dt>
                  <dd>
                    <p>
			This method entails defining a pool (sometimes also called a range or
                        scope) of IP addresses from which DHCP clients are supplied their
                        configuration properties dynamically and on a "first come, first served"
                        basis. When a DHCP client is no longer on the network for a specified
                        period, the configuration is expired and released back to the address
                        pool for use by other DHCP Clients.
			</p>
                  </dd>
                </dl>
              </div>
              <p>
	    Ubuntu is shipped with both DHCP server and client. The server is
            <span class="application"><strong>dhcpd</strong></span> (dynamic host configuration protocol daemon).
            The client provided with Ubuntu is <span class="application"><strong>dhclient</strong></span> and should 
	    be installed on all computers required to be automatically configured. Both 
	    programs are easy to install and configure and will be automatically started at
	    system boot.
	    </p>
              <div class="sect2" title="Installation">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dhcp-installation"></a>Installation</h3>
                    </div>
                  </div>
                </div>
                <p>
	  At a terminal prompt, enter the following command to install
          <span class="application"><strong>dhcpd</strong></span>:
	  </p>
                <pre class="screen">
<span class="command"><strong>sudo apt-get install dhcp3-server</strong></span>
</pre>
                <p>
	  You will probably need to change the default configuration
	  by editing /etc/dhcp3/dhcpd.conf to suit your needs and particular configuration.
	  </p>
                <p>
	  You also need to edit /etc/default/dhcp3-server to specify the interfaces dhcpd
	  should listen to. By default it listens to eth0.
	  </p>
                <p>
	  NOTE: dhcpd's messages are being sent to syslog. Look there for
	  diagnostics messages.
	  </p>
              </div>
              <div class="sect2" title="Configuration">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dhcp-configuration"></a>Configuration</h3>
                    </div>
                  </div>
                </div>
                <p>
	    The error message the installation ends with might be a little confusing, but the
            following steps will help you configure the service:
	    </p>
                <p>
	    Most commonly, what you want to do is assign an IP address randomly. This can be
            done with settings as follows:
	    </p>
                <pre class="programlisting">
# Sample /etc/dhcpd.conf
# (add your comments here) 
default-lease-time 600;
max-lease-time 7200;
option subnet-mask 255.255.255.0;
option broadcast-address 192.168.1.255;
option routers 192.168.1.254;
option domain-name-servers 192.168.1.1, 192.168.1.2;
option domain-name "mydomain.example";

subnet 192.168.1.0 netmask 255.255.255.0 {
range 192.168.1.10 192.168.1.100;
range 192.168.1.150 192.168.1.200;
} 
</pre>
                <p>
	    This will result in the DHCP server giving a client an IP address from the range
            192.168.1.10-192.168.1.100 or 192.168.1.150-192.168.1.200. It will lease an IP
            address for 600 seconds if the client doesn't ask for a specific time frame. 
	    Otherwise the maximum (allowed) lease will be 7200 seconds. The server will also 
	    "advise" the client that it should use 255.255.255.0 as its subnet mask, 
	    192.168.1.255 as its broadcast address, 192.168.1.254 as the router/gateway and 
	    192.168.1.1 and 192.168.1.2 as its DNS servers. 
	    </p>
                <p>
	    If you need to specify a WINS server for your Windows clients, you will need to
            include the netbios-name-servers option, e.g.
	    </p>
                <pre class="programlisting">
option netbios-name-servers 192.168.1.1; 
</pre>
                <p>
	    Dhcpd configuration settings are taken from the DHCP mini-HOWTO, which can be found
            <a class="ulink" href="http://www.tldp.org/HOWTO/DHCP/index.html" target="_top">here</a>.
	    </p>
              </div>
              <div class="sect2" title="References">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dhcp-references"></a>References</h3>
                    </div>
                  </div>
                </div>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
              The <a class="ulink" href="https://help.ubuntu.com/community/dhcp3-server" target="_top">dhcp3-server Ubuntu Wiki</a> page has more information.
              </p>
                    </li>
                    <li class="listitem">
                      <p>
              For more <code class="filename">/etc/dhcp3/dchpd.conf</code> options see the 
              <a class="ulink" href="http://manpages.ubuntu.com/manpages/lucid/en/man5/dhcpd.conf.5.html" target="_top">dhcpd.conf man page</a>.
              </p>
                    </li>
                    <li class="listitem">
                      <p>
              Also see the <a class="ulink" href="http://www.dhcp-handbook.com/dhcp_faq.html" target="_top">DHCP FAQ</a>
              </p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div xmlns="http://www.w3.org/1999/xhtml" class="navfooter">
            <hr />
            <table width="100%" summary="Navigation footer">
              <tr>
                <td width="40%" align="left"><a accesskey="p" href="tcpip.html"><img src="../../libs/navig/prev.png" alt="Prev" /></a> </td>
                <td width="20%" align="center">
                  <a accesskey="u" href="networking.html">
                    <img src="../../libs/navig/up.png" alt="Up" />
                  </a>
                </td>
                <td width="40%" align="right"> <a accesskey="n" href="NTP.html"><img src="../../libs/navig/next.png" alt="Next" /></a></td>
              </tr>
              <tr>
                <td width="40%" align="left" valign="top">TCP/IP </td>
                <td width="20%" align="center">
                  <a accesskey="h" href="index.html">
                    <img src="../../libs/navig/home.png" alt="Home" />
                  </a>
                </td>
                <td width="40%" align="right" valign="top"> Time Synchronisation with NTP</td>
              </tr>
            </table>
          </div>
          <hr />
          <div id="footer">
            <div id="ubuntulinks">
              <p>The material in this document is available under a free license, see <a href="/legal.html">Legal</a> for details<br />
	For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>. To report a problem, visit the <a href="https://bugs.launchpad.net/ubuntu/+source/ubuntu-docs">bug page for Ubuntu Documentation</a></p>
            </div>
          </div>
          <div id="bottomcap">
            <img src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-bottom.png" alt="" />
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
