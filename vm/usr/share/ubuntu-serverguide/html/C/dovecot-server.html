<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title xmlns="">Dovecot Server</title>
    <link rel="stylesheet" href="../../libs/ubuntu-book.css" type="text/css" />
    <link rel="home" href="index.html" title="Ubuntu Server Guide" />
    <link rel="up" href="email-services.html" title="Chapter 14. Email Services" />
    <link rel="prev" href="exim4.html" title="Exim4" />
    <link rel="next" href="mailman.html" title="Mailman" />
    <link rel="copyright" href="legal.html" title="Credits and License" />
  </head>
  <body>
    <div id="round">
      <img id="topcap" alt="" src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-top.png" />
      <div id="layout" class="container clear-block">
        <script xmlns="" src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script>
        <script xmlns="" type="text/javascript">
_uacct = "UA-1018242-8";
urchinTracker();
</script>
        <div id="header">
          <div id="logo-floater">
            <h1>
              <a href="https://help.ubuntu.com" title="Ubuntu Documentation">
                <img alt="Ubuntu" id="logo" src="https://help.ubuntu.com/htdocs/ubuntunew/img/logo.png" />
              </a>
            </h1>
          </div>
          <noscript>
            <form action="http://www.google.com/cse" id="cse-search-box">
              <div>
                <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="text" name="q" size="27" />
                <input type="submit" name="sa" value="Search" />
              </div>
            </form>
          </noscript>
          <script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="004599128559784038176:vj_p0xo-nng" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="27" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script>
          <div id="sitename">
            <a href="https://help.ubuntu.com/">
              <img alt="Official Documentation" src="https://help.ubuntu.com/htdocs/ubuntunew/img/help-about.png" />
              <span>Official Documentation</span>
            </a>
          </div>
        </div>
        <div id="page">
          <div id="content">
            <div class="breadcrumbs"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a> &gt; <a href="https://help.ubuntu.com/10.04">Ubuntu 10.04</a> &gt; <span class="breadcrumb-link"><a href="index.html">Ubuntu Server Guide</a></span> &gt; <span class="breadcrumb-link"><a href="email-services.html">Email Services</a></span> &gt; <span class="breadcrumb-node">Dovecot Server</span></div>
            <div xmlns="http://www.w3.org/1999/xhtml" class="sect1" title="Dovecot Server">
              <div class="titlepage">
                <div>
                  <div>
                    <h2 class="title" style="clear: both"><a id="dovecot-server"></a>Dovecot Server</h2>
                  </div>
                </div>
              </div>
              <p>
          <span class="application"><strong>Dovecot</strong></span> is a Mail Delivery Agent, written with security
          primarily in mind. It supports the major mailbox formats: mbox
          or Maildir. This section explain how to set it up as an imap or
          pop3 server.
          </p>
              <div class="sect2" title="Installation">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dovecot-installation"></a>Installation</h3>
                    </div>
                  </div>
                </div>
                <p>
            To install <span class="application"><strong>dovecot</strong></span>, run the following command in the
            command prompt:
	    </p>
                <pre class="screen">
<span class="command"><strong>sudo apt-get install dovecot-imapd dovecot-pop3d</strong></span>
</pre>
              </div>
              <div class="sect2" title="Configuration">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dovecot-configuration"></a>Configuration</h3>
                    </div>
                  </div>
                </div>
                <p>
            To configure <span class="application"><strong>dovecot</strong></span>, you can edit the file
            <code class="filename">/etc/dovecot/dovecot.conf</code>. You can
            choose the protocol you use. It could be pop3, pop3s (pop3
            secure), imap and imaps (imap secure). A description of these protocols is beyond the scope of this guide. For further information, refer to the Wikipedia articles on <a class="ulink" href="http://en.wikipedia.org/wiki/POP3" target="_top">POP3</a> and
            <a class="ulink" href="http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol" target="_top">IMAP</a>.
            </p>
                <p>
            IMAPS and POP3S are more secure that the simple IMAP and
            POP3 because they use SSL encryption to connect. Once you
            have chosen the protocol, amend the following line in the file
            <code class="filename">/etc/dovecot/dovecot.conf</code>:
	    </p>
                <pre class="programlisting">
protocols = pop3 pop3s imap imaps
</pre>
                <p>
            Next, choose the mailbox you would like to use. <span class="application"><strong>Dovecot</strong></span> supports
            <span class="strong"><strong>maildir</strong></span> and <span class="strong"><strong>mbox</strong></span> formats. These are the most
            commonly used mailbox formats. They both have their own
            benefits and are discussed on <a class="ulink" href="http://wiki.dovecot.org/MailboxFormat" target="_top">the Dovecot web site</a>.
            </p>
                <p>
            Once you have chosen your mailbox type, edit the file
            <code class="filename">/etc/dovecot/dovecot.conf</code> and change
            the following line:
            </p>
                <pre class="programlisting">
mail_location = maildir:~/Maildir # (for maildir)
or
mail_location = mbox:~/mail:INBOX=/var/spool/mail/%u # (for mbox)
</pre>
                <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <table border="0" summary="Note">
                    <tr>
                      <td rowspan="2" align="center" valign="top" width="25">
                        <img alt="[Note]" src="../../libs/admon/note.png" />
                      </td>
                      <th align="left"></th>
                    </tr>
                    <tr>
                      <td align="left" valign="top">
                        <p>
	  You should configure your Mail Transport Agent (MTA) to transfer the
	  incoming mail to this type of mailbox if it is different from the one
	  you have configured.
	  </p>
                      </td>
                    </tr>
                  </table>
                </div>
                <p>
          Once you have configured dovecot, restart the <span class="application"><strong>dovecot</strong></span> daemon
          in order to test your setup:
	  </p>
                <pre class="screen">
<span class="command"><strong>sudo /etc/init.d/dovecot restart</strong></span>
</pre>
                <p>
          If you have enabled imap, or pop3, you can also try to log in
          with the commands <span class="command"><strong>telnet localhost pop3</strong></span> or
          <span class="command"><strong>telnet localhost imap2</strong></span>. If you see
          something like the following, the installation has been
          successful:
	  </p>
                <pre class="programlisting">
bhuvan@rainbow:~$ telnet localhost pop3
Trying 127.0.0.1...
Connected to localhost.localdomain.
Escape character is '^]'.
+OK Dovecot ready.
</pre>
              </div>
              <div class="sect2" title="Dovecot SSL Configuration">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dovecot-ssl"></a>Dovecot SSL Configuration</h3>
                    </div>
                  </div>
                </div>
                <p>
            To configure <span class="application"><strong>dovecot</strong></span> to use SSL, you can edit the file
            <code class="filename">/etc/dovecot/dovecot.conf</code> and amend
            following lines:
	    </p>
                <pre class="programlisting">
ssl_cert_file = /etc/ssl/certs/ssl-cert-snakeoil.pem
ssl_key_file = /etc/ssl/private/ssl-cert-snakeoil.key
ssl_disable = no
disable_plaintext_auth = no
</pre>
                <p>
          You can get the SSL certificate from a Certificate Issuing
          Authority or you can create self signed SSL certificate.
	  The latter is a good option for email, because SMTP clients rarely
	  complain about "self-signed certificates".
	  Please
          refer to <a class="xref" href="certificates-and-security.html" title="Certificates">the section called “Certificates”</a>
          for details about how to create self signed SSL certificate. Once
          you create the certificate, you will have a key file and a
          certificate file.  Please copy them to the location pointed
          in the <code class="filename">/etc/dovecot/dovecot.conf</code>
          configuration file.
          </p>
              </div>
              <div class="sect2" title="Firewall Configuration for an Email Server">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="id2656287"></a>Firewall Configuration for an Email Server</h3>
                    </div>
                  </div>
                </div>
                <p>
          To access your mail server from another computer, you must
          configure your firewall to allow connections to the server on
          the necessary ports.
            </p>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>IMAP - 143</p>
                    </li>
                    <li class="listitem">
                      <p>IMAPS - 993</p>
                    </li>
                    <li class="listitem">
                      <p>POP3 - 110</p>
                    </li>
                    <li class="listitem">
                      <p>POP3S - 995</p>
                    </li>
                  </ul>
                </div>
                <p>
          </p>
              </div>
              <div class="sect2" title="References">
                <div class="titlepage">
                  <div>
                    <div>
                      <h3 class="title"><a id="dovecot-references"></a>References</h3>
                    </div>
                  </div>
                </div>
                <div class="itemizedlist">
                  <ul class="itemizedlist" type="disc">
                    <li class="listitem">
                      <p>
              See the <a class="ulink" href="http://www.dovecot.org/" target="_top">Dovecot website</a> for more information.
              </p>
                    </li>
                    <li class="listitem">
                      <p>
              Also, the <a class="ulink" href="https://help.ubuntu.com/community/Dovecot" target="_top">Dovecot Ubuntu Wiki</a> page has more details.
              </p>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div xmlns="http://www.w3.org/1999/xhtml" class="navfooter">
            <hr />
            <table width="100%" summary="Navigation footer">
              <tr>
                <td width="40%" align="left"><a accesskey="p" href="exim4.html"><img src="../../libs/navig/prev.png" alt="Prev" /></a> </td>
                <td width="20%" align="center">
                  <a accesskey="u" href="email-services.html">
                    <img src="../../libs/navig/up.png" alt="Up" />
                  </a>
                </td>
                <td width="40%" align="right"> <a accesskey="n" href="mailman.html"><img src="../../libs/navig/next.png" alt="Next" /></a></td>
              </tr>
              <tr>
                <td width="40%" align="left" valign="top">Exim4 </td>
                <td width="20%" align="center">
                  <a accesskey="h" href="index.html">
                    <img src="../../libs/navig/home.png" alt="Home" />
                  </a>
                </td>
                <td width="40%" align="right" valign="top"> Mailman</td>
              </tr>
            </table>
          </div>
          <hr />
          <div id="footer">
            <div id="ubuntulinks">
              <p>The material in this document is available under a free license, see <a href="/legal.html">Legal</a> for details<br />
	For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>. To report a problem, visit the <a href="https://bugs.launchpad.net/ubuntu/+source/ubuntu-docs">bug page for Ubuntu Documentation</a></p>
            </div>
          </div>
          <div id="bottomcap">
            <img src="https://help.ubuntu.com/htdocs/ubuntunew/img/cap-bottom.png" alt="" />
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
