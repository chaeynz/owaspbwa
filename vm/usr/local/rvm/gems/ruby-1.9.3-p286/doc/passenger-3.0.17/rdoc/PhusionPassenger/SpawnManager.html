<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class PhusionPassenger::SpawnManager - passenger-3.0.17 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/phusion_passenger/spawn_manager.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">AbstractServer
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="Utils.html">PhusionPassenger::Utils</a>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-cleanup">#cleanup</a>
    
    <li><a href="#method-i-reload">#reload</a>
    
    <li><a href="#method-i-spawn_application">#spawn_application</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../PhusionPassenger.html">PhusionPassenger</a>
  
    <li><a href="../PhusionPassenger/AbstractInstaller.html">PhusionPassenger::AbstractInstaller</a>
  
    <li><a href="../PhusionPassenger/AbstractRequestHandler.html">PhusionPassenger::AbstractRequestHandler</a>
  
    <li><a href="../PhusionPassenger/AbstractServer.html">PhusionPassenger::AbstractServer</a>
  
    <li><a href="../PhusionPassenger/AbstractServer/InvalidPassword.html">PhusionPassenger::AbstractServer::InvalidPassword</a>
  
    <li><a href="../PhusionPassenger/AbstractServer/ServerAlreadyStarted.html">PhusionPassenger::AbstractServer::ServerAlreadyStarted</a>
  
    <li><a href="../PhusionPassenger/AbstractServer/ServerError.html">PhusionPassenger::AbstractServer::ServerError</a>
  
    <li><a href="../PhusionPassenger/AbstractServer/ServerNotStarted.html">PhusionPassenger::AbstractServer::ServerNotStarted</a>
  
    <li><a href="../PhusionPassenger/AbstractServer/UnknownMessage.html">PhusionPassenger::AbstractServer::UnknownMessage</a>
  
    <li><a href="../PhusionPassenger/AbstractServerCollection.html">PhusionPassenger::AbstractServerCollection</a>
  
    <li><a href="../PhusionPassenger/AdminTools.html">PhusionPassenger::AdminTools</a>
  
    <li><a href="../PhusionPassenger/AdminTools/MemoryStats.html">PhusionPassenger::AdminTools::MemoryStats</a>
  
    <li><a href="../PhusionPassenger/AdminTools/MemoryStats/Process.html">PhusionPassenger::AdminTools::MemoryStats::Process</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance.html">PhusionPassenger::AdminTools::ServerInstance</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/CorruptedDirectoryError.html">PhusionPassenger::AdminTools::ServerInstance::CorruptedDirectoryError</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/GenerationsAbsentError.html">PhusionPassenger::AdminTools::ServerInstance::GenerationsAbsentError</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/Group.html">PhusionPassenger::AdminTools::ServerInstance::Group</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/Process.html">PhusionPassenger::AdminTools::ServerInstance::Process</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/RoleDeniedError.html">PhusionPassenger::AdminTools::ServerInstance::RoleDeniedError</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/StaleDirectoryError.html">PhusionPassenger::AdminTools::ServerInstance::StaleDirectoryError</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/Stats.html">PhusionPassenger::AdminTools::ServerInstance::Stats</a>
  
    <li><a href="../PhusionPassenger/AdminTools/ServerInstance/UnsupportedGenerationStructureVersionError.html">PhusionPassenger::AdminTools::ServerInstance::UnsupportedGenerationStructureVersionError</a>
  
    <li><a href="../PhusionPassenger/AnalyticsLogger.html">PhusionPassenger::AnalyticsLogger</a>
  
    <li><a href="../PhusionPassenger/AnalyticsLogger/Connection.html">PhusionPassenger::AnalyticsLogger::Connection</a>
  
    <li><a href="../PhusionPassenger/AnalyticsLogger/Lock.html">PhusionPassenger::AnalyticsLogger::Lock</a>
  
    <li><a href="../PhusionPassenger/AnalyticsLogger/Log.html">PhusionPassenger::AnalyticsLogger::Log</a>
  
    <li><a href="../PhusionPassenger/AppInitError.html">PhusionPassenger::AppInitError</a>
  
    <li><a href="../PhusionPassenger/AppProcess.html">PhusionPassenger::AppProcess</a>
  
    <li><a href="../PhusionPassenger/ClassicRails.html">PhusionPassenger::ClassicRails</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/ApplicationSpawner.html">PhusionPassenger::ClassicRails::ApplicationSpawner</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/ApplicationSpawner/Error.html">PhusionPassenger::ClassicRails::ApplicationSpawner::Error</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/CGIFixed.html">PhusionPassenger::ClassicRails::CGIFixed</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/FrameworkSpawner.html">PhusionPassenger::ClassicRails::FrameworkSpawner</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/FrameworkSpawner/Error.html">PhusionPassenger::ClassicRails::FrameworkSpawner::Error</a>
  
    <li><a href="../PhusionPassenger/ClassicRails/RequestHandler.html">PhusionPassenger::ClassicRails::RequestHandler</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions.html">PhusionPassenger::ClassicRailsExtensions</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACBaseExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACBaseExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACBenchmarkingExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACBenchmarkingExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACRescueExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACRescueExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ARAbstractAdapterExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ARAbstractAdapterExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/AVBenchmarkHelperExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::AVBenchmarkHelperExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/CacheStoreExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::CacheStoreExtension</a>
  
    <li><a href="../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ConcreteCacheStoreExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ConcreteCacheStoreExtension</a>
  
    <li><a href="../PhusionPassenger/ConsoleTextTemplate.html">PhusionPassenger::ConsoleTextTemplate</a>
  
    <li><a href="../PhusionPassenger/DebugLogging.html">PhusionPassenger::DebugLogging</a>
  
    <li><a href="../PhusionPassenger/Dependency.html">PhusionPassenger::Dependency</a>
  
    <li><a href="../PhusionPassenger/FrameworkInitError.html">PhusionPassenger::FrameworkInitError</a>
  
    <li><a href="../PhusionPassenger/HTMLTemplate.html">PhusionPassenger::HTMLTemplate</a>
  
    <li><a href="../PhusionPassenger/InitializationError.html">PhusionPassenger::InitializationError</a>
  
    <li><a href="../PhusionPassenger/InvalidPath.html">PhusionPassenger::InvalidPath</a>
  
    <li><a href="../PhusionPassenger/MessageChannel.html">PhusionPassenger::MessageChannel</a>
  
    <li><a href="../PhusionPassenger/MessageChannel/InvalidHashError.html">PhusionPassenger::MessageChannel::InvalidHashError</a>
  
    <li><a href="../PhusionPassenger/MessageClient.html">PhusionPassenger::MessageClient</a>
  
    <li><a href="../PhusionPassenger/NativeSupportLoader.html">PhusionPassenger::NativeSupportLoader</a>
  
    <li><a href="../PhusionPassenger/Packaging.html">PhusionPassenger::Packaging</a>
  
    <li><a href="../PhusionPassenger/PlatformInfo.html">PhusionPassenger::PlatformInfo</a>
  
    <li><a href="../PhusionPassenger/PlatformInfo/RuntimeError.html">PhusionPassenger::PlatformInfo::RuntimeError</a>
  
    <li><a href="../PhusionPassenger/Plugin.html">PhusionPassenger::Plugin</a>
  
    <li><a href="../PhusionPassenger/Rack.html">PhusionPassenger::Rack</a>
  
    <li><a href="../PhusionPassenger/Rack/ApplicationSpawner.html">PhusionPassenger::Rack::ApplicationSpawner</a>
  
    <li><a href="../PhusionPassenger/Rack/ApplicationSpawner/Error.html">PhusionPassenger::Rack::ApplicationSpawner::Error</a>
  
    <li><a href="../PhusionPassenger/Rack/RequestHandler.html">PhusionPassenger::Rack::RequestHandler</a>
  
    <li><a href="../PhusionPassenger/Rails3Extensions.html">PhusionPassenger::Rails3Extensions</a>
  
    <li><a href="../PhusionPassenger/Rails3Extensions/AnalyticsLogging.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging</a>
  
    <li><a href="../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ACExtension.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ACExtension</a>
  
    <li><a href="../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ASBenchmarkableExtension.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ASBenchmarkableExtension</a>
  
    <li><a href="../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ExceptionLogger.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ExceptionLogger</a>
  
    <li><a href="../PhusionPassenger/SpawnManager.html">PhusionPassenger::SpawnManager</a>
  
    <li><a href="../PhusionPassenger/Standalone.html">PhusionPassenger::Standalone</a>
  
    <li><a href="../PhusionPassenger/Standalone/AppFinder.html">PhusionPassenger::Standalone::AppFinder</a>
  
    <li><a href="../PhusionPassenger/Standalone/Command.html">PhusionPassenger::Standalone::Command</a>
  
    <li><a href="../PhusionPassenger/Standalone/ConfigFile.html">PhusionPassenger::Standalone::ConfigFile</a>
  
    <li><a href="../PhusionPassenger/Standalone/ConfigFile/DisallowedContextError.html">PhusionPassenger::Standalone::ConfigFile::DisallowedContextError</a>
  
    <li><a href="../PhusionPassenger/Standalone/HelpCommand.html">PhusionPassenger::Standalone::HelpCommand</a>
  
    <li><a href="../PhusionPassenger/Standalone/Main.html">PhusionPassenger::Standalone::Main</a>
  
    <li><a href="../PhusionPassenger/Standalone/PackageRuntimeCommand.html">PhusionPassenger::Standalone::PackageRuntimeCommand</a>
  
    <li><a href="../PhusionPassenger/Standalone/RuntimeInstaller.html">PhusionPassenger::Standalone::RuntimeInstaller</a>
  
    <li><a href="../PhusionPassenger/Standalone/StartCommand.html">PhusionPassenger::Standalone::StartCommand</a>
  
    <li><a href="../PhusionPassenger/Standalone/StatusCommand.html">PhusionPassenger::Standalone::StatusCommand</a>
  
    <li><a href="../PhusionPassenger/Standalone/StopCommand.html">PhusionPassenger::Standalone::StopCommand</a>
  
    <li><a href="../PhusionPassenger/Standalone/Utils.html">PhusionPassenger::Standalone::Utils</a>
  
    <li><a href="../PhusionPassenger/Standalone/VersionCommand.html">PhusionPassenger::Standalone::VersionCommand</a>
  
    <li><a href="../PhusionPassenger/UnknownError.html">PhusionPassenger::UnknownError</a>
  
    <li><a href="../PhusionPassenger/Utils.html">PhusionPassenger::Utils</a>
  
    <li><a href="../PhusionPassenger/Utils/FileSystemWatcher.html">PhusionPassenger::Utils::FileSystemWatcher</a>
  
    <li><a href="../PhusionPassenger/Utils/FileSystemWatcher/DirInfo.html">PhusionPassenger::Utils::FileSystemWatcher::DirInfo</a>
  
    <li><a href="../PhusionPassenger/Utils/FileSystemWatcher/FileInfo.html">PhusionPassenger::Utils::FileSystemWatcher::FileInfo</a>
  
    <li><a href="../PhusionPassenger/Utils/HostsFileParser.html">PhusionPassenger::Utils::HostsFileParser</a>
  
    <li><a href="../PhusionPassenger/Utils/Kernel.html">PhusionPassenger::Utils::Kernel</a>
  
    <li><a href="../PhusionPassenger/Utils/PseudoIO.html">PhusionPassenger::Utils::PseudoIO</a>
  
    <li><a href="../PhusionPassenger/Utils/RewindableInput.html">PhusionPassenger::Utils::RewindableInput</a>
  
    <li><a href="../PhusionPassenger/Utils/RewindableInput/Tempfile.html">PhusionPassenger::Utils::RewindableInput::Tempfile</a>
  
    <li><a href="../PhusionPassenger/Utils/UnseekableSocket.html">PhusionPassenger::Utils::UnseekableSocket</a>
  
    <li><a href="../PhusionPassenger/VersionNotFound.html">PhusionPassenger::VersionNotFound</a>
  
    <li><a href="../PhusionPassenger/WSGI.html">PhusionPassenger::WSGI</a>
  
    <li><a href="../PhusionPassenger/WSGI/ApplicationSpawner.html">PhusionPassenger::WSGI::ApplicationSpawner</a>
  
    <li><a href="../ConditionVariable.html">ConditionVariable</a>
  
    <li><a href="../Exception.html">Exception</a>
  
    <li><a href="../GC.html">GC</a>
  
    <li><a href="../IO.html">IO</a>
  
    <li><a href="../Object.html">Object</a>
  
    <li><a href="../Process.html">Process</a>
  
    <li><a href="../Signal.html">Signal</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class PhusionPassenger::SpawnManager</h1>

  <div id="description" class="description">
    
<p>The spawn manager is capable of spawning Ruby on Rails or <a
href="Rack.html">Rack</a> application instances. It acts like a simple
fascade for the rest of the spawn manager system.</p>

<p><strong>Note</strong>: <a href="SpawnManager.html">SpawnManager</a> may
only be started synchronously with <a
href="AbstractServer.html#method-i-start_synchronously">PhusionPassenger::AbstractServer#start_synchronously</a>.
Starting asynchronously has not been tested. Don't forget to call cleanup
after the server's main loop has finished.</p>

<h2 id="label-Ruby+on+Rails+optimizations">Ruby on Rails optimizations</h2>

<p>Spawning a Ruby on Rails application is usually slow. But <a
href="SpawnManager.html">SpawnManager</a> will preload and cache Ruby on
Rails frameworks, as well as application code, so subsequent spawns will be
very fast.</p>

<p>Internally, <a href="SpawnManager.html">SpawnManager</a> uses <a
href="ClassicRails/FrameworkSpawner.html">ClassicRails::FrameworkSpawner</a>
to preload and cache Ruby on Rails frameworks. <a
href="ClassicRails/FrameworkSpawner.html">ClassicRails::FrameworkSpawner</a>,
in turn, uses <a
href="ClassicRails/ApplicationSpawner.html">ClassicRails::ApplicationSpawner</a>
to preload and cache application code.</p>

<p>In case you’re wondering why the namespace is “ClassicRails” and not
“Rails”: it’s to work around an obscure bug in ActiveSupport’s Dispatcher.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/phusion_passenger/spawn_manager.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
        <span class="ruby-keyword">super</span>(<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot;&quot;</span>)
        <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
        <span class="ruby-ivar">@spawners</span> = <span class="ruby-constant">AbstractServerCollection</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">define_message_handler</span>(<span class="ruby-value">:spawn_application</span>, <span class="ruby-value">:handle_spawn_application</span>)
        <span class="ruby-identifier">define_message_handler</span>(<span class="ruby-value">:reload</span>, <span class="ruby-value">:handle_reload</span>)
        <span class="ruby-identifier">define_signal_handler</span>(<span class="ruby-string">'SIGHUP'</span>, <span class="ruby-value">:reload</span>)
        
        <span class="ruby-comment"># Start garbage collector in order to free up some existing</span>
        <span class="ruby-comment"># heap slots. This prevents the heap from growing unnecessarily</span>
        <span class="ruby-comment"># during the startup phase.</span>
        <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
        <span class="ruby-keyword">if</span> <span class="ruby-constant">GC</span>.<span class="ruby-identifier">copy_on_write_friendly?</span>
                <span class="ruby-comment"># Preload libraries for copy-on-write semantics.</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'base64'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/app_process'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/classic_rails/framework_spawner'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/classic_rails/application_spawner'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/rack/application_spawner'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/html_template'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/platform_info'</span>
                <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/exceptions'</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-cleanup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">cleanup</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Cleanup resources. Should be called when this <a
href="SpawnManager.html">SpawnManager</a> is no longer needed.</p>
          

          
          <div class="method-source-code" id="cleanup-source">
            <pre><span class="ruby-comment"># File lib/phusion_passenger/spawn_manager.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cleanup</span>
        <span class="ruby-ivar">@spawners</span>.<span class="ruby-identifier">cleanup</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- cleanup-source -->
          
        </div>

        

        
      </div><!-- cleanup-method -->

    
      <div id="method-i-reload" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reload</span><span
            class="method-args">(app_group_name = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Remove the cached application instances at the given group name. If nil is
specified as group name, then all cached application instances will be
removed, no matter the group name.</p>

<p><strong>Long description:</strong> Application code might be cached in
memory. But once it a while, it will be necessary to reload the code for an
application, such as after deploying a new version of the application. This
method makes sure that any cached application code is removed, so that the
next time an application instance is spawned, the application code will be
freshly loaded into memory.</p>

<p>Raises AbstractServer::SpawnError if something went wrong.</p>
          

          
          <div class="method-source-code" id="reload-source">
            <pre><span class="ruby-comment"># File lib/phusion_passenger/spawn_manager.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">app_group_name</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-ivar">@spawners</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_group_name</span>
                        <span class="ruby-comment"># Stop and delete associated ApplicationSpawner.</span>
                        <span class="ruby-ivar">@spawners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-node">&quot;app:#{app_group_name}&quot;</span>)
                        <span class="ruby-comment"># Propagate reload command to associated FrameworkSpawner.</span>
                        <span class="ruby-ivar">@spawners</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spawner</span><span class="ruby-operator">|</span>
                                <span class="ruby-keyword">if</span> <span class="ruby-identifier">spawner</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:reload</span>)
                                        <span class="ruby-identifier">spawner</span>.<span class="ruby-identifier">reload</span>(<span class="ruby-identifier">app_group_name</span>)
                                <span class="ruby-keyword">end</span>
                        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">else</span>
                        <span class="ruby-comment"># Stop and delete all spawners.</span>
                        <span class="ruby-ivar">@spawners</span>.<span class="ruby-identifier">clear</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- reload-source -->
          
        </div>

        

        
      </div><!-- reload-method -->

    
      <div id="method-i-spawn_application" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">spawn_application</span><span
            class="method-args">(options)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Spawns an application with the given spawn options. When successful, an <a
href="AppProcess.html">AppProcess</a> object will be returned, which
represents the spawned application process.</p>

<p>Most options are explained in PoolOptions.h.</p>

<p>Mandatory options:</p>
<ul><li>
<p>‘app_root’</p>
</li></ul>

<p>Optional options:</p>
<ul><li>
<p>‘app_type’</p>
</li><li>
<p>‘environment’</p>
</li><li>
<p>‘spawn_method’</p>
</li><li>
<p>‘user’,</p>
</li><li>
<p>‘group’</p>
</li><li>
<p>‘default_user’</p>
</li><li>
<p>‘default_group’</p>
</li><li>
<p>‘framework_spawner_timeout’</p>
</li><li>
<p>‘app_spawner_timeout’</p>
</li><li>
<p>‘environment_variables’: Environment variables which should be passed to
the spawned application process. This is NULL-seperated string of key-value
pairs, encoded in base64. The last byte in the unencoded data must be a
NULL.</p>
</li><li>
<p>‘base_uri’</p>
</li><li>
<p>‘print_exceptions’</p>
</li></ul>

<p><strong>Exceptions:</strong></p>
<ul><li>
<p>InvalidPath: <code>app_root</code> doesn’t appear to be a valid Ruby on
Rails application root.</p>
</li><li>
<p>VersionNotFound: The Ruby on Rails framework version that the given
application requires is not installed.</p>
</li><li>
<p>AbstractServer::ServerError: One of the server processes exited
unexpectedly.</p>
</li><li>
<p>FrameworkInitError: The Ruby on Rails framework that the application
requires could not be loaded.</p>
</li><li>
<p>AppInitError: The application raised an exception or called exit() during
startup.</p>
</li></ul>
          

          
          <div class="method-source-code" id="spawn_application-source">
            <pre><span class="ruby-comment"># File lib/phusion_passenger/spawn_manager.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spawn_application</span>(<span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;app_root&quot;</span>]
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;The 'app_root' option must be given.&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">options</span> = <span class="ruby-identifier">sanitize_spawn_options</span>(<span class="ruby-identifier">options</span>)
        
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;app_type&quot;</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;rails&quot;</span>
                <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">defined?</span>(<span class="ruby-constant">ClassicRails</span><span class="ruby-operator">::</span><span class="ruby-constant">FrameworkSpawner</span>)
                        <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/classic_rails/framework_spawner'</span>
                        <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/classic_rails/application_spawner'</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">spawn_rails_application</span>(<span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;rack&quot;</span>
                <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">defined?</span>(<span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">ApplicationSpawner</span>)
                        <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/rack/application_spawner'</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">spawn_rack_application</span>(<span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;wsgi&quot;</span>
                <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">defined?</span>(<span class="ruby-constant">WSGI</span><span class="ruby-operator">::</span><span class="ruby-constant">ApplicationSpawner</span>)
                        <span class="ruby-identifier">require</span> <span class="ruby-string">'phusion_passenger/wsgi/application_spawner'</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">return</span> <span class="ruby-constant">WSGI</span><span class="ruby-operator">::</span><span class="ruby-constant">ApplicationSpawner</span>.<span class="ruby-identifier">spawn_application</span>(<span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Unknown 'app_type' value '#{options[&quot;app_type&quot;]}'.&quot;</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- spawn_application-source -->
          
        </div>

        

        
      </div><!-- spawn_application-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

